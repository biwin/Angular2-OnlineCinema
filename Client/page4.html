Skip to content This repository Search Pull requests Issues Gist @LeDucI Unwatch 1 Star 0 Fork 1 nphau/Angular2-OnlineCinema Code Issues 0 Pull requests 0 Projects 0 Wiki Pulse Graphs Branch: master Find file Copy pathAngular2-OnlineCinema/Client/page4.html e523aec 10 days ago @LeDucI LeDucI Merge branch 'master' of https://bitbucket.org/hinITUS/onlinecinema 2 contributors @nphau @LeDucI RawBlameHistory 258 lines (236 sloc) 12.1 KB
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>Online Cinema</title>
    <!-- Bootstrap -->
    <link href="assets/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="assets/css/styles.css">
    <link rel="stylesheet" href="assets/css/font-awesome.min.css">
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <link href='https://fonts.googleapis.com/css?family=Montserrat:400,700' rel='stylesheet' type='text/css'>

    <style>
      /* Always set the map height explicitly to define the size of the div
       * element that contains the map. */
      #map {
        height: 100%;
      }
      /* Optional: Makes the sample page fill the window. */
      html, body {
        height: 100%;
        margin: 0;
        padding: 0;
      }
      #floating-panel {
        left: 25%;
        z-index: 5;
        background-color: #fff;
        padding: 5px;
        border: 1px solid #999;
        text-align: center;
        font-family: 'Roboto','sans-serif';
        line-height: 30px;
        padding-left: 10px;
      }
      #warnings-panel {
        width: 100%;
        height:10%;
        text-align: center;
      }
    </style>

</head>

<body>
    <header id="header" class="">
        <div class="top-header clearfix">
            <div class="wrapper">
                <div class="left-top-header btn-title">
                    Monday, November 28, 2016
                </div>
                <div class="right-top-header">
                    <ul class="nav navbar-nav navbar-right">
                        <li><a href="#"><span class="glyphicon glyphicon-user"></span> Sign Up</a></li>
                        <li><a href="#"><span class="glyphicon glyphicon-log-in"></span> Login</a></li>
                    </ul>
                </div>
            </div>
        </div>
        <div class="wrapper main-header">
            <div class="banner">
                <div class="site-branding clearfix">
                    <div class="site-logo float-left">
                        <a href="http://lichchieuphimcgv.com/" class="custom-logo-link" rel="home" itemprop="url"><img width="290" height="59" src="http://lichchieuphimcgv.com/wp-content/uploads/2016/07/cropped-logo-lichchieuphimcgv.png" class="custom-logo" alt="cropped-logo-lichchieuphimcgv.png" itemprop="logo"></a>
                    </div>
                    <!--site-logo-->
                    <!--supermag-header-id-display-opt-->
                    <div class="clearfix"></div>
                </div>
            </div>
            <div class="main-menu">
                <nav id="site-navigation" class="main-navigation clearfix" role="navigation">
                    <div class="header-main-menu clearfix">
                        <div class="home-icon front_page_on">
                            <a href="index.html" title="Lịch chiếu phim CGV"><i class="fa fa-home"></i></a>
                        </div>
                        <div class="acmethemes-nav">
                            <ul id="menu-menu-1" class="menu">
                                <li id="menu-item-1" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-26"><a href="">Phim</a></li>
                                <li id="menu-item-2" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-27"><a href="">Rạp</a></li>
                                <li id="menu-item-3" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-25"><a href="">Lịch chiếu</a></li>
                                <li id="menu-item-4" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-59"><a href="page4.html">Hướng dẫn</a></li>
                            </ul>
                        </div>
                        <div class="search-block">
                            <form action="http://lichchieuphimcgv.com" class="searchform" id="searchform" method="get" role="search">
                                <div>
                                    <label for="menu-search" class="screen-reader-text"></label>
                                    <input type="text" placeholder="Search" id="menu-search" name="s" value="">
                                    <button class="fa fa-search" type="submit" id="searchsubmit"></button>
                                </div>
                            </form>
                        </div>
                    </div>
                </nav>
            </div>
        </div>
    </header>
    <div class="container wrapper content-wrapper clearfix" style="height: 100%;">
        <div id="floating-panel">
            <div>
                <label>From: </label>
                <input id="origin-input" class="controls" type="text" placeholder="Enter an origin location">
            </div>
            <b>Cinema: </b>
            <select id="end">
                <option value="1 Đường số 17A, Bình Trị Đông B, phường Bình Trị Đông B, Ho Chi Minh City 700000, Vietnam">CGV-Aeon Mall Bình Tân</option>
                <option value="1 Trường Chinh, Tây Thạnh, Tân Phú, Hồ Chí Minh, Vietnam">CGV Pandora City</option>
            </select>
            <div id="mode-selector" class="controls">
                <input type="radio" name="type" id="changemode-walking" checked="checked">
                <label for="changemode-walking">Walking</label>
                <input type="radio" name="type" id="changemode-transit">
                <label for="changemode-transit">Transit</label>
                <input type="radio" name="type" id="changemode-driving">
                <label for="changemode-driving">Driving</label>
            </div>
            <input type="button" value="Go!" onclick="calcRoute();">
        </div>
        <div id="map" style="height: 500px"></div>
        <div id="warnings-panel"></div>
    </div>
    <footer>
    </footer>
    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="js/bootstrap.min.js"></script>
    <script type='text/javascript'>
    var mapCanvas;
    var directionDisplay;
    var directionsService;
    var stepDisplay;
    var markerArray = [];
    var travelMode = 'WALKING';
    function initialize() {
        // Instantiate a directions service.
        directionsService = new google.maps.DirectionsService();

        // Create a map and center it on Manhattan.
        var ducbachurch = new google.maps.LatLng(20.424899, 106.177873);
        var myOptions = {
            zoom: 13,
            mapTypeId: google.maps.MapTypeId.ROADMAP,
            center: ducbachurch,
            mapTypeControl: false
        }
        mapCanvas = new google.maps.Map(document.getElementById("map"), myOptions);

        // Create a renderer for directions and bind it to the map.
        var rendererOptions = {
            map: mapCanvas,
            suppressMarkers: true
        }
        directionsDisplay = new google.maps.DirectionsRenderer(rendererOptions)

        // Instantiate an info window to hold step text.
        stepDisplay = new google.maps.InfoWindow();

        new AutocompleteDirectionsHandler(mapCanvas);

                // Try HTML5 geolocation.
        if (navigator.geolocation) {
            navigator.geolocation.getCurrentPosition(function(position) {
                var latlng = {
                    lat: position.coords.latitude,
                    lng: position.coords.longitude
                };

                console.log(latlng);

                var geocoder = new google.maps.Geocoder;
                geocoder.geocode({
                    'location': latlng
                }, function(results, status) {
                    if (status === 'OK') {
                        if (results[1]) {
                            console.log("Here");


                            document.getElementById("origin-input").value = results[1].formatted_address;
                        } else {
                            window.alert('No results found');
                        }
                    } else {
                        window.alert('Geocoder failed due to: ' + status);
                    }
                });
            });
        }

        calcRoute();
    }

    /**
     * @constructor
     */
    function AutocompleteDirectionsHandler(map) {
        this.map = map;
        this.originPlaceId = null;
        this.destinationPlaceId = null;
        this.travelMode = 'WALKING';
        var originInput = document.getElementById('origin-input');
        var modeSelector = document.getElementById('mode-selector');

        var originAutocomplete = new google.maps.places.Autocomplete(
            originInput, {
                placeIdOnly: true
            });

        this.setupClickListener('changemode-walking', 'WALKING');
        this.setupClickListener('changemode-transit', 'TRANSIT');
        this.setupClickListener('changemode-driving', 'DRIVING');

        this.setupPlaceChangedListener(originAutocomplete, 'ORIG');

        this.map.controls[google.maps.ControlPosition.TOP_LEFT].push(originInput);
        this.map.controls[google.maps.ControlPosition.TOP_LEFT].push(modeSelector);
    }

    // Sets a listener on a radio button to change the filter type on Places
    // Autocomplete.
    AutocompleteDirectionsHandler.prototype.setupClickListener = function(id, mode) {
        var radioButton = document.getElementById(id);
        var me = this;
        radioButton.addEventListener('click', function() {
            me.travelMode = mode;
            //me.route();
            travelMode = mode;
            calcRoute();
        });
    };

    AutocompleteDirectionsHandler.prototype.setupPlaceChangedListener = function(autocomplete, mode) {
        var me = this;
        autocomplete.bindTo('bounds', this.map);
        autocomplete.addListener('place_changed', function() {
            var place = autocomplete.getPlace();
            if (!place.place_id) {
                window.alert("Please select an option from the dropdown list.");
                return;
            }
            if (mode === 'ORIG') {
                me.originPlaceId = place.place_id;
            }
            //me.route();
        });

    };

    function calcRoute() {
        var start = document.getElementById("origin-input").value;
        if(!start)
            return;

        // First, remove any existing markers from the map.
        for (i = 0; i < markerArray.length; i++) {
            markerArray[i].setMap(null);
        }

        // Now, clear the array itself.
        markerArray = [];

        // Retrieve the start and end locations and create
        // a DirectionsRequest using WALKING directions.
        
        var end = document.getElementById("end").value;
        var request = {
            origin: start,
            destination: end,
            travelMode: travelMode
        };

        // Route the directions and pass the response to a
        // function to create markers for each step.
        directionsService.route(request, function(response, status) {
            if (status == google.maps.DirectionsStatus.OK) {
                var warnings = document.getElementById("warnings-panel");
                warnings.innerHTML = "<b>" + response.routes[0].warnings + "</b>";
                directionsDisplay.setDirections(response);
                showSteps(response);
            }
        });
    }

    function showSteps(directionResult) {
        // For each step, place a marker, and add the text to the marker's
        // info window. Also attach the marker to an array so we
        // can keep track of it and remove it when calculating new
        // routes.
        var myRoute = directionResult.routes[0].legs[0];

        for (var i = 0; i < myRoute.steps.length; i++) {
            var icon = "https://chart.googleapis.com/chart?chst=d_map_pin_letter&chld=" + i + "|FF0000|000000";
            if (i == 0) {
                
                icon = "https://chart.googleapis.com/chart?chst=d_map_pin_icon&chld=flag|ADDE63";
            }
            var marker = new google.maps.Marker({
                position: myRoute.steps[i].start_point,
                map: mapCanvas,
                icon: icon
            });
            attachInstructionText(marker, myRoute.steps[i].instructions);
            markerArray.push(marker);
        }
        var marker = new google.maps.Marker({
            position: myRoute.steps[i - 1].end_point,
            map: mapCanvas,
            icon: "https://chart.googleapis.com/chart?chst=d_simple_text_icon_above&chld=Cinema|16|00F|cinema|16|00FFFF|FF0000"
        });
        markerArray.push(marker);

        google.maps.event.trigger(markerArray[0], "click");
    }

    function attachInstructionText(marker, text) {
        google.maps.event.addListener(marker, 'click', function() {
            // Open an info window when the marker is clicked on,
            // containing the text of the step.
            stepDisplay.setContent(text);
            stepDisplay.open(mapCanvas, marker);
        });
    }
    //google.maps.event.addDomListener(window, "load", initialize);
    </script>
    <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDRoRo0-7PGdvtBSYYAEMZ4G-Na_x6YXW8&libraries=places&callback=initialize" type="text/javascript"></script>
</body>

</html>
